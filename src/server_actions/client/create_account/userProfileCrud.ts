/* eslint-disable @typescript-eslint/no-explicit-any */
// This file is auto-generated by scripts/gen_server_action_hooks.ts
import { userProfileCrud } from "../../definitions/create_account/index";
import { ProfileUpdateInput } from "../../definitions/common/profile";
import {
  useMutation,
  useQuery,
  useQueryClient,
  type UseMutationOptions,
  type QueryClient,
} from "@tanstack/react-query";

export const useCreateAccount = (mutationOptions?: {
  update?: UseMutationOptions<boolean, Error, ProfileUpdateInput, unknown>;
}) => {
  const queryKey = ["createAccount"];
  const dependantQueryKeys = [["createAccount"], queryKey];
  const queryClient = useQueryClient();
  const query = useQuery(
    { queryKey, queryFn: async () => await userProfileCrud("read", undefined) },
    queryClient,
  );
  const update = useMutation(
    {
      ...mutationOptions?.update,
      mutationFn: async (data: ProfileUpdateInput) => {
        dependantQueryKeys.forEach((queryKey) =>
          queryClient.cancelQueries({ queryKey }),
        );
        return await userProfileCrud("update", data);
      },

      onSettled: (data, error, variables, onMutateResult, context) => {
        dependantQueryKeys.forEach((queryKey) =>
          queryClient.invalidateQueries({ queryKey }),
        );
        mutationOptions?.update?.onSettled?.(
          data,
          error,
          variables,
          onMutateResult,
          context,
        );
      },
    },
    queryClient,
  );
  return { ...query, update };
};
export const getCreateAccountQueryKey = () => {
  return ["createAccount"] as const;
};
export const getCreateAccountQueryOptions = () => {
  return {
    queryKey: getCreateAccountQueryKey(),
    queryFn: async () => userProfileCrud("read", undefined),
  } as const;
};
export const prefetchCreateAccount = () => (qc: QueryClient) =>
  qc.prefetchQuery(getCreateAccountQueryOptions());
